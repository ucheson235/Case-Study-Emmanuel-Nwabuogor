<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pivot Table: Satisfaction Ratings by Subscription Plan</title>
    <style>
        /* General Styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        .Pivot{
            margin-top: 120px;
        }

        h1, h2 {
            text-align: center;
            margin: 20px 0;
            color: #333;
        }

        #pivot-table-container, #working-container, #conclusions-container, #recommendations-container {
            margin: 30px auto;
            width: 80%;
        }

        #pivot-table-container {
            text-align: center;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: center;
        }

        th {
            background-color: rgba(255, 205, 86, 0.8);
        }

        td {
            background-color: #f8f9fa;
        }

        footer {
            background-color: #f4d03f;
            padding: 20px 0;
            text-align: center;
        }

        footer img {
            height: 50px;
        }

        footer p {
            margin: 10px 0;
            font-size: 14px;
        }

        footer a {
            color: black;
            text-decoration: underline;
        }

        /* Navbar */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #f4d03f;
            padding: 10px 1px;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .navbar img {
            height: 50px;
        }

        .menu-button {
            display: none;
            font-size: 24px;
            cursor: pointer;
            background: none;
            border: none;
        }

        .nav-menu {
            list-style: none;
            display: flex;
            margin: 0;
            padding: 0;
        }

        .nav-menu li {
            margin: 0 15px;
        }

        .nav-menu li a {
            text-decoration: none;
            color: black;
            font-size: 16px;
            padding: 5px 10px;
            transition: all 0.3s ease;
        }

        .nav-menu li a:hover {
            background-color: black;
            color: #f4d03f;
            border-radius: 50px;
        }

        /* Responsive Styles */
        @media (max-width: 1600px) {
            #pivot-table-container, #working-container, #conclusions-container, #recommendations-container {
                width: 90%;
            }

            .nav-menu li a {
                font-size: 14px;
            }
        }

        @media (max-width: 900px) {
            .menu-button {
                display: block;
            }

            .nav-menu {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 60px;
                left: 0;
                width: 100%;
                background-color: #f4d03f;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }

            .nav-menu.active {
                display: flex;
            }

            .nav-menu li {
                margin: 10px 0;
            }

            #pivot-table-container, #working-container, #conclusions-container, #recommendations-container {
                width: 95%;
            }
        }

        @media (max-width: 767px) {
            h1, h2 {
                font-size: 1.5rem;
            }

            table th, table td {
                font-size: 0.9rem;
                padding: 8px;
            }

            footer p {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <a href="./index.html">
            <img src="https://sunking.com/wp-content/uploads/2017/12/Sun-King-Logo-1.png" alt="Sun King Logo">
        </a>
        <button class="menu-button" id="menu-button">â˜°</button>
        <ul class="nav-menu" id="nav-menu">
            <li><a href="./index.html">Home</a></li>
            <li><a href="./group_analysis.html">Customer Group Analysis</a></li>
            <li><a href="./Line_Graph.html">Line Graph</a></li>
            <li><a href="./Bar_Chart.html">Bar-Chart</a></li>
            <li><a href="./pivot_table_subscription_plan.html">Pivot-Table</a></li>
            <li><a href="./late_payments_by_region.html">Late Payments</a></li>
            <li><a href="./P_chart.html">Pie-Chart</a></li>
            <li><a href="./Column_Chart.html">Column-Chart</a></li>
            <li><a href="./working.html">Working</a></li>
        </ul>
    </nav>

    <main>
        <h1 class="Pivot">Pivot Table: Satisfaction Ratings by Subscription Plan</h1>
        <div id="pivot-table-container">
            <table id="pivot-table">
                <thead>
                    <tr>
                        <th>Region</th>
                        <th>Basic</th>
                        <th>Standard</th>
                        <th>Premium</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <div id="working-container">
            <h2>Working</h2>
            <p>The raw data is based on customer feedback grouped by region and subscription plan. The average satisfaction rating for each combination was calculated by summing the ratings and dividing by the count of customers in that group.</p>
        </div>

        <div id="conclusions-container">
            <h2>Conclusions</h2>
            <ul>
                <li><strong>Urban:</strong> High satisfaction across all plans, especially the Standard plan.</li>
                <li><strong>Semi-Urban:</strong> Moderate satisfaction, but the Premium plan shows lower ratings.</li>
                <li><strong>Rural:</strong> Low satisfaction, with Standard and Premium plans needing attention.</li>
            </ul>
        </div>

        <div id="recommendations-container">
            <h2>Recommendations</h2>
            <ul>
                <li>Focus on improving the Premium plan experience in Semi-Urban and Rural regions.</li>
                <li>Conduct surveys to identify specific pain points for customers on the Standard and Premium plans in Rural areas.</li>
                <li>Leverage success strategies from Urban regions to boost satisfaction in Semi-Urban and Rural areas.</li>
            </ul>
        </div>
    </main>

    <footer>
        <a href="./index.html">
            <img src="https://sunking.com/wp-content/uploads/2017/12/Sun-King-Logo-1.png" alt="Sun King Logo">
        </a>
        <p>&copy; 2024 Sun King. All rights reserved. | <a href="#">Privacy Policy</a></p>
    </footer>

    <script>
        // Raw Data
        const rawData = [
            { id: "CUST-001", region: "Urban", plan: "Basic", rating: 8 },
            { id: "CUST-002", region: "Urban", plan: "Standard", rating: 9 },
            { id: "CUST-003", region: "Urban", plan: "Premium", rating: 8.5 },
            { id: "CUST-004", region: "Semi-Urban", plan: "Basic", rating: 7 },
            { id: "CUST-005", region: "Semi-Urban", plan: "Standard", rating: 7.5 },
            { id: "CUST-006", region: "Semi-Urban", plan: "Premium", rating: 6.5 },
            { id: "CUST-007", region: "Rural", plan: "Basic", rating: 6 },
            { id: "CUST-008", region: "Rural", plan: "Standard", rating: 5.5 },
            { id: "CUST-009", region: "Rural", plan: "Premium", rating: 6.5 }
        ];

        // Function to calculate average satisfaction by region and plan
        function calculatePivotTable(data) {
            const regions = ["Urban", "Semi-Urban", "Rural"];
            const plans = ["Basic", "Standard", "Premium"];

            const pivot = regions.map(region => {
                const row = { region };
                plans.forEach(plan => {
                    const filtered = data.filter(d => d.region === region && d.plan === plan);
                    const avgRating = filtered.length
                        ? (filtered.reduce((sum, d) => sum + d.rating, 0) / filtered.length).toFixed(1)
                        : "N/A";
                    row[plan] = avgRating;
                });
                return row;
            });

            return pivot;
        }

        // Generate Pivot Table
        const pivotData = calculatePivotTable(rawData);

        // Populate Table
        const pivotTableBody = document.querySelector("#pivot-table tbody");
        pivotData.forEach(row => {
            const tr = document.createElement("tr");
            tr.innerHTML = `
                <td>${row.region}</td>
                <td>${row.Basic}</td>
                <td>${row.Standard}</td>
                <td>${row.Premium}</td>
            `;
            pivotTableBody.appendChild(tr);
        });

        // Navbar Toggle
        const menuButton = document.getElementById("menu-button");
        const navMenu = document.getElementById("nav-menu");

        menuButton.addEventListener("click", () => {
            navMenu.classList.toggle("active");
        });
    </script>
</body>
</html>
